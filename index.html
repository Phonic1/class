<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Good Morning M6</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Lexend Deca', 'sans-serif'],
              handwriting: ['Schoolbell', 'cursive'],
            },
            colors: {
              primary: '#007bff',
              accentGreen: '#28a745',
              accentYellow: '#ffc107',
              accentRed: '#dc3545',
            },
            keyframes: {
              'fade-in': {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              'slide-up': {
                '0%': { transform: 'translateY(20px)', opacity: '0' },
                '100%': { transform: 'translateY(0)', opacity: '1' },
              },
              'pop-in': {
                '0%': { transform: 'scale(0.8)', opacity: '0' },
                '100%': { transform: 'scale(1)', opacity: '1' },
              }
            },
            animation: {
              'fade-in': 'fade-in 0.5s ease-out',
              'slide-up': 'slide-up 0.6s ease-out',
              'pop-in': 'pop-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
            }
          }
        }
      }
    </script>

    <!-- 2. Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@300;400;500;600&family=Schoolbell&display=swap" rel="stylesheet">

    <!-- 3. React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- 4. Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        transition: background-color 0.3s, color 0.3s;
      }
      /* Hide scrollbar for cleaner dashboard look */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent; 
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1; 
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8; 
      }

      /* ---- Place Value Grid System ---- */
      :root { --square-size: 20px; }
      
      .grid-container { 
          display: grid; 
          background-color: #ffffff; 
          border: 1px solid #cbd5e1; 
          transition: background-color 0.2s ease, transform 0.1s ease, border-color 0.2s ease; 
      }
      
      .grid-1x10 { 
          grid-template-columns: var(--square-size); 
          grid-template-rows: repeat(10, var(--square-size)); 
      }
      
      .square { 
          width: var(--square-size); 
          height: var(--square-size); 
          box-sizing: border-box; 
          border: 1px solid rgba(0,0,0,0.2); 
          background-color: #ffffff;
      }

      /* Interactive States */
      .grid-container.blue { 
          background-color: #3498db; 
          transform: scale(1.05); 
          border-color: #2980b9; 
      }

      .grid-container.blue .square {
          background-color: #3498db;
          border-color: #2980b9;
      }
      
      .square.green { 
          background-color: #2ecc71; 
          transform: scale(1.2); 
          border-color: #27ae60; 
          z-index: 10;
      }

      /* High Contrast Overrides */
      .hc-mode .grid-container { background-color: #1a1a1a; border-color: #fff; }
      .hc-mode .square { background-color: #1a1a1a; border-color: #fff; }
      
      .hc-mode .grid-container.blue { background-color: #3b82f6; border-color: #fff; }
      .hc-mode .grid-container.blue .square { background-color: #3b82f6; border-color: #fff; }
      
      .hc-mode .square.green { background-color: #22c55e; border-color: #fff; }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>

    <!-- MAIN APPLICATION SCRIPT -->
    <script type="text/babel" data-type="module">
        /**
         * SETUP FOR BROWSER ENVIRONMENT
         * We shim process.env so we can use the standard configuration.
         */
        window.process = {
            env: {
                // -----------------------------------------------------------
                // ELEVEN LABS API KEY
                // -----------------------------------------------------------
                ELEVEN_LABS_API_KEY: 'sk_ed34d55944955291e4c085277560d981fd8fb59cdfa2b3a0' 
            }
        };

        /*********************************************************
         * CONSTANTS & DATA
         *********************************************************/
        const CLASS_LIST = [
            "Aisha", "Ben", "Chloe", "David", "Emma", 
            "Finn", "Grace", "Harry", "Isla", "Jack",
            "Liam", "Mia", "Noah", "Olivia", "Zoe"
        ];

        const TIMETABLES = {
            1: [ // Monday
                { time: '9:00', activity: 'Morning Circle', icon: '‚≠ï' },
                { time: '9:30', activity: 'Literacy Block', icon: 'üìñ' },
                { time: '11:00', activity: 'Recess', icon: 'üçé' },
                { time: '11:30', activity: 'Numeracy', icon: 'üî¢' },
                { time: '1:00', activity: 'Lunch', icon: 'ü•™' },
                { time: '2:00', activity: 'Science', icon: 'üß™' },
            ],
            2: [ // Tuesday
                { time: '9:00', activity: 'Morning Circle', icon: '‚≠ï' },
                { time: '9:30', activity: 'Numeracy', icon: 'üî¢' },
                { time: '11:00', activity: 'Recess', icon: 'üçé' },
                { time: '11:30', activity: 'Literacy Block', icon: 'üìñ' },
                { time: '1:00', activity: 'Lunch', icon: 'ü•™' },
                { time: '2:00', activity: 'Art', icon: 'üé®' },
            ],
            3: [ // Wednesday
                { time: '9:00', activity: 'Morning Circle', icon: '‚≠ï' },
                { time: '9:30', activity: 'Literacy Block', icon: 'üìñ' },
                { time: '11:00', activity: 'Recess', icon: 'üçé' },
                { time: '11:30', activity: 'Numeracy', icon: 'üî¢' },
                { time: '1:00', activity: 'Lunch', icon: 'ü•™' },
                { time: '2:00', activity: 'P.E.', icon: '‚öΩ' },
            ],
            4: [ // Thursday
                { time: '9:00', activity: 'Morning Circle', icon: '‚≠ï' },
                { time: '9:30', activity: 'Numeracy', icon: 'üî¢' },
                { time: '11:00', activity: 'Recess', icon: 'üçé' },
                { time: '11:30', activity: 'Literacy Block', icon: 'üìñ' },
                { time: '1:00', activity: 'Lunch', icon: 'ü•™' },
                { time: '2:00', activity: 'Music', icon: 'üéµ' },
            ],
            5: [ // Friday
                { time: '9:00', activity: 'Morning Circle', icon: '‚≠ï' },
                { time: '9:30', activity: 'Inquiry Project', icon: '‚ùì' },
                { time: '11:00', activity: 'Recess', icon: 'üçé' },
                { time: '11:30', activity: 'Free Choice', icon: 'üé≤' },
                { time: '1:00', activity: 'Lunch', icon: 'ü•™' },
                { time: '2:00', activity: 'Assembly', icon: 'üì¢' },
            ],
        };

        const WEEKDAYS = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        const MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        // LOCAL DICTIONARY DATA
        const LOCAL_DICTIONARY = [
            { word: "curious", partsOfSpeech: ["adjective"], definition: "wanting to know or learn more about something", examples: "The curious student asked many questions in class." },
            { word: "brave", partsOfSpeech: ["adjective"], definition: "showing courage and not being easily scared", examples: "She was brave when she answered the hard question." },
            { word: "timid", partsOfSpeech: ["adjective"], definition: "shy and not very confident", examples: "The timid boy spoke quietly to the teacher." },
            { word: "polite", partsOfSpeech: ["adjective"], definition: "showing good manners and respect to others", examples: "It is polite to say please and thank you." },
            { word: "respect", partsOfSpeech: ["noun", "verb"], definition: "a feeling of care for someone; to treat someone as important", examples: { noun: "The class showed respect by listening quietly.", verb: "We should respect our classmates and teachers." } },
            { word: "confident", partsOfSpeech: ["adjective"], definition: "sure of yourself and your abilities", examples: "He felt confident before his class presentation." },
            { word: "proud", partsOfSpeech: ["adjective"], definition: "feeling pleased about something you or someone else did well", examples: "I am proud of my neat handwriting." },
            { word: "responsible", partsOfSpeech: ["adjective"], definition: "able to be trusted to do what you should do", examples: "She is responsible and always finishes her homework." },
            { word: "creative", partsOfSpeech: ["adjective"], definition: "good at using imagination to make new things", examples: "He had a creative idea for the art project." },
            { word: "patient", partsOfSpeech: ["adjective"], definition: "able to wait calmly without getting upset", examples: "You need to be patient when you are in a long line." },
            { word: "grateful", partsOfSpeech: ["adjective"], definition: "feeling thankful for something", examples: "I am grateful for my friends and family." },
            { word: "fair", partsOfSpeech: ["adjective"], definition: "treating people equally and not cheating", examples: "The teacher made a fair decision during the game." },
            { word: "generous", partsOfSpeech: ["adjective"], definition: "willing to share or give more than expected", examples: "He was generous and shared his snacks." },
            { word: "honest", partsOfSpeech: ["adjective"], definition: "telling the truth and not cheating or stealing", examples: "She was honest and admitted her mistake." },
            { word: "clumsy", partsOfSpeech: ["adjective"], definition: "moving in a way that is not graceful and causes accidents", examples: "He felt clumsy when he dropped his books." },
            { word: "serious", partsOfSpeech: ["adjective"], definition: "not joking; showing that something is important", examples: "The teacher used a serious voice during the safety talk." },
            { word: "calm", partsOfSpeech: ["adjective", "verb"], definition: "relaxed and not upset; to make someone less upset", examples: { adjective: "She stayed calm during the fire drill.", verb: "The teacher tried to calm the noisy class." } },
            { word: "brilliant", partsOfSpeech: ["adjective"], definition: "very clever or very bright", examples: "That was a brilliant solution to the puzzle." },
            { word: "determined", partsOfSpeech: ["adjective"], definition: "not giving up easily; wanting to keep trying", examples: "He was determined to finish his project on time." },
            { word: "gentle", partsOfSpeech: ["adjective"], definition: "kind and careful, not rough", examples: "Be gentle when you hold the classroom iPad." },
            { word: "helpful", partsOfSpeech: ["adjective"], definition: "willing to help others", examples: "The class was helpful when we cleaned the room." },
            { word: "bold", partsOfSpeech: ["adjective"], definition: "not afraid to take risks or speak up", examples: "The bold student volunteered to go first." },
            { word: "cautious", partsOfSpeech: ["adjective"], definition: "careful to avoid danger or mistakes", examples: "He was cautious when crossing the busy road." },
            { word: "jealous", partsOfSpeech: ["adjective"], definition: "feeling upset because someone has something you want", examples: "She felt jealous when her friend got a new bike." },
            { word: "relieved", partsOfSpeech: ["adjective"], definition: "feeling happy because something bad did not happen", examples: "He was relieved when the test was over." },
            { word: "excited", partsOfSpeech: ["adjective"], definition: "very happy and eager about something", examples: "The students were excited for the school trip." },
            { word: "anxious", partsOfSpeech: ["adjective"], definition: "worried or nervous about what might happen", examples: "She felt anxious before her oral presentation." },
            { word: "lazy", partsOfSpeech: ["adjective"], definition: "not liking to work or be active", examples: "He felt lazy and did not want to clean his desk." },
            { word: "mysterious", partsOfSpeech: ["adjective"], definition: "strange or hard to understand or explain", examples: "There was a mysterious noise in the hallway." },
            { word: "ancient", partsOfSpeech: ["adjective"], definition: "very old and from a long time ago", examples: "We learned about ancient Egyptian pyramids." },
            { word: "modern", partsOfSpeech: ["adjective"], definition: "from the present or recent times; not old-fashioned", examples: "The library has modern computers for students." },
            { word: "average", partsOfSpeech: ["adjective", "noun"], definition: "usual or normal; the result of adding and dividing", examples: { adjective: "The weather today is just average, not too hot.", noun: "We found the average of the three test scores." } },
            { word: "massive", partsOfSpeech: ["adjective"], definition: "very large and heavy", examples: "The massive elephant walked slowly." },
            { word: "tiny", partsOfSpeech: ["adjective"], definition: "very small", examples: "She found a tiny ant on her pencil." },
            { word: "fragile", partsOfSpeech: ["adjective"], definition: "easy to break or damage", examples: "The glass beaker is fragile, so handle it carefully." },
            { word: "sturdy", partsOfSpeech: ["adjective"], definition: "strong and not easily broken", examples: "The sturdy chair did not wobble." },
            { word: "confusing", partsOfSpeech: ["adjective"], definition: "hard to understand", examples: "The directions were confusing at first." },
            { word: "clear", partsOfSpeech: ["adjective"], definition: "easy to see or understand", examples: "The teacher gave clear instructions." },
            { word: "disappointed", partsOfSpeech: ["adjective"], definition: "sad because something did not happen as you hoped", examples: "He was disappointed when the game was canceled." },
            { word: "thrilled", partsOfSpeech: ["adjective"], definition: "very excited and happy", examples: "She was thrilled to win the spelling bee." },
            { word: "steady", partsOfSpeech: ["adjective"], definition: "firm and not shaking or changing", examples: "Hold the ruler steady while you draw the line." },
            { word: "wild", partsOfSpeech: ["adjective"], definition: "living in nature; not tamed; uncontrolled", examples: "We saw a wild kangaroo near the road." },
            { word: "rare", partsOfSpeech: ["adjective"], definition: "not happening or found very often", examples: "It is rare to see snow in our town." },
            { word: "common", partsOfSpeech: ["adjective"], definition: "happening or found often", examples: "It is common for students to bring water bottles." },
            { word: "disagree", partsOfSpeech: ["verb"], definition: "to have a different opinion", examples: "We disagree about which sport is the best." },
            { word: "whisper", partsOfSpeech: ["verb", "noun"], definition: "to speak very softly; a soft, quiet voice", examples: { verb: "Please whisper so you don‚Äôt disturb other classes.", noun: "She spoke in a whisper during the movie." } },
            { word: "suggest", partsOfSpeech: ["verb"], definition: "to give an idea or plan for others to think about", examples: "I suggest we start with the easiest question." },
            { word: "explain", partsOfSpeech: ["verb"], definition: "to make something clear so others understand", examples: "Can you explain how you solved the problem?" },
            { word: "compare", partsOfSpeech: ["verb"], definition: "to look for how things are the same or different", examples: "We will compare the two characters in the story." },
            { word: "imagine", partsOfSpeech: ["verb"], definition: "to form a picture or idea in your mind", examples: "Imagine what our school will be like in 50 years." },
            { word: "improve", partsOfSpeech: ["verb"], definition: "to make something better", examples: "Practicing every day will improve your reading." },
            { word: "encourage", partsOfSpeech: ["verb"], definition: "to give someone support or confidence", examples: "The teacher will encourage you to try your best." },
            { word: "interrupt", partsOfSpeech: ["verb"], definition: "to stop someone while they are speaking or doing something", examples: "It is rude to interrupt when someone is talking." },
            { word: "protect", partsOfSpeech: ["verb"], definition: "to keep someone or something safe", examples: "We protect our skin by wearing sunscreen." },
            { word: "decide", partsOfSpeech: ["verb"], definition: "to choose something after thinking", examples: "She must decide which book to borrow." },
            { word: "celebrate", partsOfSpeech: ["verb"], definition: "to do something enjoyable because of a special day or event", examples: "We will celebrate the end of term with a party." },
            { word: "solve", partsOfSpeech: ["verb"], definition: "to find the answer to a problem", examples: "Can you solve this math question?" },
            { word: "organize", partsOfSpeech: ["verb"], definition: "to arrange or put things in order", examples: "Please organize your desk before you go home." },
            { word: "borrow", partsOfSpeech: ["verb"], definition: "to take and use something that belongs to someone else and return it later", examples: "May I borrow a pencil, please?" },
            { word: "return", partsOfSpeech: ["verb"], definition: "to give or go back again", examples: "Remember to return your library books on time." },
            { word: "collect", partsOfSpeech: ["verb"], definition: "to bring things together in one place", examples: "I will collect the worksheets after the test." },
            { word: "connect", partsOfSpeech: ["verb"], definition: "to join together", examples: "We connect the wires to make the light turn on." },
            { word: "choose", partsOfSpeech: ["verb"], definition: "to pick one thing from a group", examples: "You may choose any book from the shelf." },
            { word: "predict", partsOfSpeech: ["verb"], definition: "to say what you think will happen", examples: "Predict what might happen in the next chapter." },
            { word: "argue", partsOfSpeech: ["verb"], definition: "to disagree with someone using reasons or words", examples: "The brothers argue about whose turn it is." },
            { word: "support", partsOfSpeech: ["verb", "noun"], definition: "to help or hold up; help that is given", examples: { verb: "Friends support each other during hard times.", noun: "She thanked her parents for their support." } },
            { word: "focus", partsOfSpeech: ["verb", "noun"], definition: "to pay close attention; the main point of attention", examples: { verb: "Please focus on your writing.", noun: "The focus of the lesson is fractions." } },
            { word: "discuss", partsOfSpeech: ["verb"], definition: "to talk about something with another person or group", examples: "We will discuss the story in small groups." },
            { word: "create", partsOfSpeech: ["verb"], definition: "to make something new", examples: "Use the blocks to create your own design." },
            { word: "behave", partsOfSpeech: ["verb"], definition: "to act in a certain way, especially to follow rules", examples: "Please behave during the assembly." },
            { word: "inspect", partsOfSpeech: ["verb"], definition: "to look at something carefully", examples: "The scientist will inspect the rock samples." },
            { word: "observe", partsOfSpeech: ["verb"], definition: "to watch carefully", examples: "We will observe the insects with a magnifying glass." },
            { word: "explore", partsOfSpeech: ["verb"], definition: "to travel through or study a place to learn about it", examples: "We explore the school garden for science." },
            { word: "measure", partsOfSpeech: ["verb", "noun"], definition: "to find the size or amount of something; a unit or tool for finding size", examples: { verb: "Measure the length of your desk with a ruler.", noun: "A meter is a measure of length." } },
            { word: "calculate", partsOfSpeech: ["verb"], definition: "to work out a number or answer using math", examples: "Use your calculator to calculate the total." },
            { word: "gather", partsOfSpeech: ["verb"], definition: "to bring people or things together", examples: "The students gather in the hall for assembly." },
            { word: "announce", partsOfSpeech: ["verb"], definition: "to tell something to many people", examples: "The principal will announce the winners." },
            { word: "remind", partsOfSpeech: ["verb"], definition: "to help someone remember something", examples: "Please remind me to bring the permission slip." },
            { word: "organised", partsOfSpeech: ["adjective"], definition: "neat and planned; having things in order", examples: "His notebook is very organised and easy to read." },
            { word: "noisy", partsOfSpeech: ["adjective"], definition: "making a lot of sound", examples: "The cafeteria was noisy at lunchtime." },
            { word: "silent", partsOfSpeech: ["adjective"], definition: "very quiet; making no sound", examples: "The classroom was silent during the test." },
            { word: "crowded", partsOfSpeech: ["adjective"], definition: "full of people, with little space", examples: "The bus was crowded after school." },
            { word: "empty", partsOfSpeech: ["adjective"], definition: "having nothing inside", examples: "The box was empty after we used all the pencils." },
            { word: "lucky", partsOfSpeech: ["adjective"], definition: "having good things happen by chance", examples: "He felt lucky to find a coin on the ground." },
            { word: "unlucky", partsOfSpeech: ["adjective"], definition: "having bad things happen by chance", examples: "It was unlucky that it rained on sports day." },
            { word: "tidy", partsOfSpeech: ["adjective", "verb"], definition: "neat and in order; to make something neat", examples: { adjective: "Her desk is always tidy.", verb: "We tidy the room before going home." } },
            { word: "messy", partsOfSpeech: ["adjective"], definition: "not neat; dirty or untidy", examples: "The art table was messy after the lesson." },
            { word: "shimmer", partsOfSpeech: ["verb"], definition: "to shine with a soft, unsteady light", examples: "Stars shimmer in the night sky." },
            { word: "chilly", partsOfSpeech: ["adjective"], definition: "a little cold", examples: "It was chilly outside, so he wore a jumper." },
            { word: "boiling", partsOfSpeech: ["adjective"], definition: "very hot", examples: "It felt boiling on the playground at lunchtime." },
            { word: "flexible", partsOfSpeech: ["adjective"], definition: "able to bend easily; able to change plans", examples: "The schedule is flexible if we need more time." },
            { word: "fierce", partsOfSpeech: ["adjective"], definition: "very strong or violent", examples: "The fierce storm shook the windows." },
            { word: "gentleman", partsOfSpeech: ["noun"], definition: "a kind and polite man", examples: "He was a true gentleman and held the door open." },
            { word: "citizen", partsOfSpeech: ["noun"], definition: "a person who belongs to a country or community", examples: "Each citizen must follow the laws." },
            { word: "village", partsOfSpeech: ["noun"], definition: "a small town in the countryside", examples: "Her grandparents live in a quiet village." },
            { word: "journey", partsOfSpeech: ["noun"], definition: "a trip from one place to another", examples: "The bus journey to camp took two hours." },
            { word: "adventure", partsOfSpeech: ["noun"], definition: "an exciting and sometimes risky experience", examples: "Exploring the forest felt like an adventure." },
            { word: "planet", partsOfSpeech: ["noun"], definition: "a large round object in space that moves around a star", examples: "Earth is the planet we live on." },
            { word: "galaxy", partsOfSpeech: ["noun"], definition: "a huge group of stars and planets in space", examples: "The Milky Way is the galaxy that holds our solar system." },
            { word: "distance", partsOfSpeech: ["noun"], definition: "how far it is from one place to another", examples: "We measured the distance between the cones." },
            { word: "energy", partsOfSpeech: ["noun"], definition: "the power to do work or be active", examples: "Running uses a lot of energy." },
            { word: "temperature", partsOfSpeech: ["noun"], definition: "how hot or cold something is", examples: "We checked the temperature with a thermometer." },
            { word: "ability", partsOfSpeech: ["noun"], definition: "the skill to do something", examples: "She has the ability to run very fast." },
            { word: "effort", partsOfSpeech: ["noun"], definition: "hard work used to do something", examples: "Your effort on this project really shows." },
            { word: "strength", partsOfSpeech: ["noun"], definition: "the power to move or lift things; a good quality", examples: "Kindness is one of his strengths." },
            { word: "weakness", partsOfSpeech: ["noun"], definition: "a part of you that is not very strong or good", examples: "Spelling is her weakness, but she is improving." },
            { word: "relationship", partsOfSpeech: ["noun"], definition: "the way people or things are connected", examples: "We talked about the relationship between the characters." },
            { word: "environment", partsOfSpeech: ["noun"], definition: "the air, land, water, and living things around us", examples: "We must care for our environment." },
            { word: "community", partsOfSpeech: ["noun"], definition: "a group of people who live or work together", examples: "Our school is an important part of the community." },
            { word: "equipment", partsOfSpeech: ["noun"], definition: "the tools or things needed for a job", examples: "The sports equipment is stored in the shed." },
            { word: "pattern", partsOfSpeech: ["noun"], definition: "something that repeats in a regular way", examples: "We saw a pattern in the numbers on the chart." },
            { word: "solution", partsOfSpeech: ["noun"], definition: "the answer to a problem", examples: "He found a clever solution to the puzzle." },
            { word: "opinion", partsOfSpeech: ["noun"], definition: "what you think or believe about something", examples: "Everyone shared an opinion about the story." },
            { word: "fact", partsOfSpeech: ["noun"], definition: "something that is true and can be proven", examples: "It is a fact that water freezes at 0 degrees Celsius." },
            { word: "danger", partsOfSpeech: ["noun"], definition: "the chance of being hurt", examples: "Running in the hallway can cause danger." },
            { word: "safety", partsOfSpeech: ["noun"], definition: "being protected from harm", examples: "We wear helmets for safety when we ride bikes." },
            { word: "talent", partsOfSpeech: ["noun"], definition: "a natural skill or ability", examples: "She has a talent for drawing." },
            { word: "habit", partsOfSpeech: ["noun"], definition: "something you do often, usually without thinking", examples: "Brushing your teeth every night is a good habit." },
            { word: "schedule", partsOfSpeech: ["noun"], definition: "a plan that shows when things will happen", examples: "Our class schedule shows when we have each subject." },
            { word: "task", partsOfSpeech: ["noun"], definition: "a job or piece of work to do", examples: "Your task is to finish the worksheet." },
            { word: "goal", partsOfSpeech: ["noun"], definition: "something you want to do or achieve", examples: "His goal is to read every night." },
            { word: "challenge", partsOfSpeech: ["noun", "verb"], definition: "a difficult task; to invite someone to try something hard", examples: { noun: "Learning long division was a challenge.", verb: "I challenge you to beat your best score." } },
            { word: "choice", partsOfSpeech: ["noun"], definition: "the act of picking between things", examples: "You have a choice of two books to read." },
            { word: "result", partsOfSpeech: ["noun"], definition: "what happens because of something else", examples: "The result of his studying was a high score." },
            { word: "audience", partsOfSpeech: ["noun"], definition: "a group of people watching or listening", examples: "The audience clapped at the end of the play." },
            { word: "character", partsOfSpeech: ["noun"], definition: "a person or animal in a story", examples: "My favourite character is the brave hero." },
            { word: "setting", partsOfSpeech: ["noun"], definition: "the time and place where a story happens", examples: "We described the setting of the book together." },
            { word: "headline", partsOfSpeech: ["noun"], definition: "the title of a news story or article", examples: "Write a catchy headline for your newspaper report." }
        ];

        const WeatherType = {
            Sunny: '‚òÄÔ∏è',
            Cloudy: '‚òÅÔ∏è',
            PartlyCloudy: 'üå¶Ô∏è',
            Rainy: 'üåßÔ∏è',
            Windy: 'üí®',
            Snowy: '‚ùÑÔ∏è',
            Hot: 'üî•',
            Cold: 'ü•∂',
        };

        /*********************************************************
         * AUDIO & TTS LOGIC
         *********************************************************/
        
        // Global Audio Context
        let audioContext = null;
        let activeSource = null;

        function getAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return audioContext;
        }

        async function playAudioData(arrayBuffer) {
            const ctx = getAudioContext();
            
            // Stop existing audio
            if (activeSource) {
                try { activeSource.stop(); } catch(e) {}
                activeSource = null;
            }

            // Decode the MP3/WAV data
            const audioBuffer = await ctx.decodeAudioData(arrayBuffer);
            
            const source = ctx.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(ctx.destination);
            source.start(0);
            activeSource = source;

            return new Promise((resolve) => {
                source.onended = () => {
                    activeSource = null;
                    resolve();
                };
            });
        }

        function stopAudio() {
             if (activeSource) {
                try { activeSource.stop(); } catch(e) {}
                activeSource = null;
            }
        }

        const TTSButton = ({ text, highContrast, className = "" }) => {
            const [status, setStatus] = React.useState('idle'); // idle, loading, playing
            
            const handleClick = async (e) => {
                e.stopPropagation();
                
                if (status === 'playing') {
                    stopAudio();
                    setStatus('idle');
                    return;
                }

                if (status === 'loading') return;

                try {
                    setStatus('loading');
                    
                    const apiKey = window.process?.env?.ELEVEN_LABS_API_KEY;
                    // "George" Voice ID (British, Warm, Male)
                    const VOICE_ID = 'JBFqnCBsd6RMkjVDRZzb'; 

                    if (!apiKey) {
                        alert("API Key missing! Please check the code config.");
                        setStatus('idle');
                        return;
                    }

                    const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
                        method: 'POST',
                        headers: {
                            'Accept': 'audio/mpeg',
                            'Content-Type': 'application/json',
                            'xi-api-key': apiKey
                        },
                        body: JSON.stringify({
                            text: text,
                            model_id: "eleven_multilingual_v2",
                            voice_settings: {
                                stability: 0.5,
                                similarity_boost: 0.75
                            }
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.detail?.message || `ElevenLabs Error: ${response.status}`);
                    }

                    const arrayBuffer = await response.arrayBuffer();
                    
                    setStatus('playing');
                    await playAudioData(arrayBuffer);
                    setStatus('idle');

                } catch (error) {
                    console.error("TTS Error:", error);
                    alert(`Error generating speech: ${error.message || error}.`);
                    setStatus('idle');
                }
            };

            // Cleanup on unmount
            React.useEffect(() => {
                return () => {
                    if (status === 'playing') stopAudio();
                };
            }, []);

            const btnClass = highContrast 
                ? "bg-yellow-400 text-black border-2 border-white hover:bg-yellow-300"
                : "bg-white text-primary shadow-md hover:shadow-lg hover:bg-gray-50";

            return (
                <button
                    onClick={handleClick}
                    className={`absolute top-4 left-4 p-3 rounded-full z-50 transition-all ${btnClass} ${className}`}
                    title="Read aloud"
                    aria-label={status === 'playing' ? "Stop reading" : "Read screen"}
                >
                    {status === 'loading' && (
                        <svg className="animate-spin h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    )}
                    {status === 'playing' && <span className="text-2xl">‚èπÔ∏è</span>}
                    {status === 'idle' && <span className="text-2xl">üîä</span>}
                </button>
            );
        };


        /*********************************************************
         * COMPONENT: LAYOUT
         *********************************************************/
        const Layout = ({ children, highContrast, toggleHighContrast, currentPage, totalPages, onNext, onPrev }) => {
            const baseClasses = "min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-sans";
            const themeClasses = highContrast 
                ? "bg-black text-white" 
                : "bg-gray-50 text-gray-900";

            const containerClasses = highContrast
                ? "w-full max-w-5xl p-8 rounded-2xl border-2 border-white shadow-none bg-black min-h-[700px] flex flex-col"
                : "w-full max-w-5xl p-8 rounded-2xl bg-white shadow-xl border border-gray-200 min-h-[700px] flex flex-col";

            const buttonClasses = highContrast
                ? "px-6 py-3 rounded-lg font-bold text-lg transition-transform active:scale-95 border-2 border-white bg-yellow-400 text-black hover:bg-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"
                : "px-6 py-3 rounded-lg font-bold text-lg transition-transform active:scale-95 bg-primary text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0";

            return (
                <div className={`${baseClasses} ${themeClasses}`}>
                    {/* Controls */}
                    <div className="absolute top-4 right-4 z-50 flex gap-2">
                        <button 
                            onClick={toggleHighContrast}
                            className={`p-3 rounded-full text-2xl transition-all ${highContrast ? 'border-2 border-white text-yellow-400 hover:bg-white hover:text-black' : 'bg-white text-gray-800 shadow-md hover:shadow-lg'}`}
                            title={highContrast ? "Disable High Contrast" : "Enable High Contrast"}
                        >
                            {highContrast ? 'üí°' : '‚òÄÔ∏è'}
                        </button>
                    </div>

                    {/* Main Canvas */}
                    <main className={containerClasses}>
                        <div className="flex-grow flex flex-col justify-center relative overflow-hidden">
                            {children}
                        </div>

                        {/* Navigation */}
                        <div className="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center shrink-0">
                            <button 
                                onClick={onPrev} 
                                disabled={currentPage === 0}
                                className={buttonClasses}
                            >
                                ‚Üê Back
                            </button>
                            
                            <div className="text-sm font-medium opacity-60">
                                Page {currentPage + 1} of {totalPages}
                            </div>

                            <button 
                                onClick={onNext} 
                                disabled={currentPage === totalPages - 1}
                                className={buttonClasses}
                            >
                                Next ‚Üí
                            </button>
                        </div>
                    </main>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: WORD OF THE DAY TILE (UPDATED)
         *********************************************************/
        const WordOfTheDay = ({ highContrast }) => {
            const [wordData, setWordData] = React.useState(null);

            React.useEffect(() => {
                // Seed based on date so it's consistent for the whole day
                const now = new Date();
                const start = new Date(now.getFullYear(), 0, 0);
                const diff = now - start;
                const oneDay = 1000 * 60 * 60 * 24;
                const dayOfYear = Math.floor(diff / oneDay);
                
                if (LOCAL_DICTIONARY.length > 0) {
                    const index = dayOfYear % LOCAL_DICTIONARY.length;
                    setWordData(LOCAL_DICTIONARY[index]);
                }
            }, []);

            if (!wordData) return null;

            // Helper for examples which can be string or object
            const getExample = (ex) => {
                if (typeof ex === 'string') return ex;
                if (typeof ex === 'object' && ex !== null) return Object.values(ex)[0];
                return '';
            };

            const example = getExample(wordData.examples);

            return (
                 <div className={`mt-8 relative w-full max-w-lg p-6 rounded-2xl text-left transition-all hover:scale-[1.01]
                    ${highContrast 
                        ? 'bg-gray-900 border-2 border-white text-white' 
                        : 'bg-white/80 backdrop-blur-sm border border-purple-100 shadow-xl'
                    }`}>
                    
                    {/* Decorative Icon */}
                    <div className="absolute top-4 right-4 text-4xl opacity-20">‚ú®</div>

                    <div className="flex flex-col gap-1 mb-4">
                        <span className={`text-xs font-bold uppercase tracking-widest ${highContrast ? 'text-yellow-400' : 'text-purple-600'}`}>
                            Word of the Day
                        </span>
                        <div className="flex items-baseline gap-3">
                            <h2 className="text-3xl font-bold capitalize">{wordData.word}</h2>
                            <span className="italic opacity-60 text-sm">{wordData.partsOfSpeech.join(', ')}</span>
                        </div>
                    </div>

                    <p className="text-lg font-medium leading-snug mb-3 opacity-90">
                        {wordData.definition}
                    </p>

                    {example && (
                        <div className={`pl-3 border-l-4 ${highContrast ? 'border-yellow-400' : 'border-purple-300'} text-sm italic opacity-70`}>
                            "{example}"
                        </div>
                    )}
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: BRAIN SPARK (Trivia)
         *********************************************************/
        const BrainSpark = ({ highContrast }) => {
            const [isOpen, setIsOpen] = React.useState(false);
            const [loading, setLoading] = React.useState(false);
            const [questionData, setQuestionData] = React.useState(null);
            const [shuffledAnswers, setShuffledAnswers] = React.useState([]);
            const [selectedAnswer, setSelectedAnswer] = React.useState(null);
            const [answered, setAnswered] = React.useState(false);

            // Helper to decode HTML entities from API
            const decodeHTML = (html) => {
                const txt = document.createElement('textarea');
                txt.innerHTML = html;
                return txt.value;
            };

            const fetchTrivia = async () => {
                setLoading(true);
                setIsOpen(true);
                setQuestionData(null);
                setSelectedAnswer(null);
                setAnswered(false);
                setShuffledAnswers([]);

                // Categories: 17 (Science & Nature), 27 (Animals), 22 (Geography)
                const categories = [17, 27, 22];
                const randomCat = categories[Math.floor(Math.random() * categories.length)];

                try {
                    // Open Trivia DB: Easy difficulty, Multiple Choice
                    const response = await fetch(`https://opentdb.com/api.php?amount=1&category=${randomCat}&difficulty=easy&type=multiple`);
                    const data = await response.json();

                    if (data.results && data.results.length > 0) {
                        const q = data.results[0];
                        
                        // Shuffle answers
                        const answers = [...q.incorrect_answers, q.correct_answer];
                        const shuffled = answers
                            .map(value => ({ value, sort: Math.random() }))
                            .sort((a, b) => a.sort - b.sort)
                            .map(({ value }) => value);

                        setQuestionData(q);
                        setShuffledAnswers(shuffled);
                    }
                } catch (e) {
                    console.error("Trivia API Error", e);
                } finally {
                    setLoading(false);
                }
            };

            const handleAnswerClick = (answer) => {
                if (answered) return;
                setSelectedAnswer(answer);
                setAnswered(true);
            };

            const closeModal = () => {
                setIsOpen(false);
                setQuestionData(null);
            };

            return (
                <>
                    <button 
                        onClick={fetchTrivia}
                        className={`mt-4 px-6 py-2 rounded-full font-bold text-sm tracking-wide transition-all transform hover:scale-105 flex items-center gap-2 mx-auto w-64 justify-center
                            ${highContrast ? 'bg-yellow-500 border-2 border-white text-black' : 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'}`}
                    >
                        <span>üß†</span> Brain Spark
                    </button>

                    {isOpen && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm" onClick={closeModal}>
                            <div 
                                className={`relative w-full max-w-2xl p-8 rounded-2xl shadow-2xl animate-pop-in cursor-auto
                                    ${highContrast ? 'bg-black border-2 border-white text-white' : 'bg-white text-gray-800'}`}
                                onClick={e => e.stopPropagation()}
                            >
                                <button 
                                    onClick={closeModal}
                                    className="absolute top-4 right-4 text-2xl opacity-50 hover:opacity-100"
                                >
                                    √ó
                                </button>

                                {loading ? (
                                    <div className="flex flex-col items-center py-12">
                                        <div className="w-12 h-12 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin mb-4"></div>
                                        <p>Sparking the brain...</p>
                                    </div>
                                ) : questionData ? (
                                    <div className="text-center">
                                        <div className="text-sm uppercase tracking-widest opacity-50 mb-4 text-yellow-600 font-bold">
                                            {decodeHTML(questionData.category)}
                                        </div>
                                        
                                        <h2 className="text-2xl md:text-3xl font-bold mb-8 leading-tight">
                                            {decodeHTML(questionData.question)}
                                        </h2>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                            {shuffledAnswers.map((ans, idx) => {
                                                const isSelected = selectedAnswer === ans;
                                                const isCorrect = ans === questionData.correct_answer;
                                                
                                                let btnClass = highContrast 
                                                    ? "bg-gray-800 border-2 border-white hover:bg-gray-700" 
                                                    : "bg-gray-100 hover:bg-gray-200 border-2 border-transparent";

                                                // Reveal colors
                                                if (answered) {
                                                    if (isCorrect) {
                                                        btnClass = highContrast ? "bg-green-600 border-green-400" : "bg-green-100 border-green-400 text-green-800";
                                                    } else if (isSelected && !isCorrect) {
                                                        btnClass = highContrast ? "bg-red-600 border-red-400" : "bg-red-100 border-red-400 text-red-800";
                                                    } else {
                                                        btnClass += " opacity-50";
                                                    }
                                                }

                                                return (
                                                    <button
                                                        key={idx}
                                                        onClick={() => handleAnswerClick(ans)}
                                                        disabled={answered}
                                                        className={`p-4 rounded-xl text-lg font-medium transition-all transform active:scale-95 ${btnClass}`}
                                                    >
                                                        {decodeHTML(ans)}
                                                        {answered && isCorrect && <span className="ml-2">‚úÖ</span>}
                                                        {answered && isSelected && !isCorrect && <span className="ml-2">‚ùå</span>}
                                                    </button>
                                                );
                                            })}
                                        </div>

                                        {answered && (
                                            <div className="animate-fade-in">
                                                <button 
                                                    onClick={fetchTrivia}
                                                    className={`px-8 py-3 rounded-full font-bold text-lg transition-transform hover:scale-105
                                                        ${highContrast ? 'bg-white text-black' : 'bg-yellow-400 text-yellow-900 shadow-lg'}`}
                                                >
                                                    Another Question?
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                ) : (
                                    <div className="text-center py-8">
                                        <p>Could not load a question. Try again later!</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </>
            );
        };

        /*********************************************************
         * COMPONENT: WELCOME
         *********************************************************/
        const Welcome = ({ highContrast }) => {
            const [currentDate, setCurrentDate] = React.useState(new Date());

            React.useEffect(() => {
                const timer = setInterval(() => setCurrentDate(new Date()), 60000);
                return () => clearInterval(timer);
            }, []);

            const dayName = WEEKDAYS[currentDate.getDay()];
            const monthName = MONTHS[currentDate.getMonth()];
            const dateNum = currentDate.getDate();
            const year = currentDate.getFullYear();

            const ttsText = `Good Morning M 5. Today is ${dayName}, the ${dateNum}th of ${monthName}, ${year}.`;

            return (
                <div className="text-center animate-fade-in w-full relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h1 className={`text-5xl md:text-7xl font-medium mb-6 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>
                        Good Morning M5
                    </h1>
                    <div className="space-y-4">
                        <h2 className="text-3xl md:text-4xl font-light">
                            Today is <span className="font-semibold">{dayName}</span>
                        </h2>
                        <h3 className="text-2xl md:text-3xl font-light opacity-90">
                            {dateNum} {monthName} {year}
                        </h3>
                    </div>
                    
                    <div className="flex flex-col items-center mt-8 gap-4 w-full px-4">
                        <WordOfTheDay highContrast={highContrast} />
                        <BrainSpark highContrast={highContrast} />
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: DATE REPRESENTATION (Updated with Grid Function)
         *********************************************************/
        const DateRepresentation = ({ highContrast }) => {
            // Target date is today's day (e.g., 24)
            const [dateVal, setDateVal] = React.useState(new Date().getDate());
            
            // State for interactive blocks
            // Tens: 5 strips of 10 (enough for date 31)
            const [tens, setTens] = React.useState(Array(5).fill(false));
            // Ones: 20 single units
            const [ones, setOnes] = React.useState(Array(20).fill(false));

            const toggleTen = (idx) => {
                const newTens = [...tens];
                newTens[idx] = !newTens[idx];
                setTens(newTens);
            };

            const toggleOne = (idx) => {
                const newOnes = [...ones];
                newOnes[idx] = !newOnes[idx];
                setOnes(newOnes);
            };

            const currentTotal = (tens.filter(Boolean).length * 10) + ones.filter(Boolean).length;
            const isCorrect = currentTotal === dateVal;
            
            const ttsText = `Represent the Date. Today is the ${dateVal}th. Tap the blocks to show the number ${dateVal}. The current total is ${currentTotal}.`;

            return (
                <div className={`text-center w-full animate-fade-in relative flex flex-col items-center ${highContrast ? 'hc-mode' : ''}`}>
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-2 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>
                        Represent the Date: <span className="font-bold text-4xl ml-2">{dateVal}</span>
                    </h2>
                    <p className="mb-6 text-lg opacity-80">Tap the blocks to make the number {dateVal}.</p>

                    <div className="flex flex-wrap justify-center items-end gap-8 mb-8 min-h-[250px]">
                        {/* Tens Area */}
                        <div className={`flex gap-4 items-end p-6 rounded-xl ${highContrast ? 'border border-blue-400' : 'bg-blue-50/50'}`}>
                             {tens.map((isActive, i) => (
                                <div 
                                    key={`ten-${i}`}
                                    onClick={() => toggleTen(i)}
                                    className={`grid-container grid-1x10 cursor-pointer ${isActive ? 'blue shadow-lg' : 'hover:bg-gray-50'}`}
                                    title="Click to toggle 10"
                                >
                                    {[...Array(10)].map((_, j) => <div key={j} className="square"></div>)}
                                </div>
                             ))}
                             <div className="text-sm font-bold opacity-50 absolute -bottom-6 left-1/2 transform -translate-x-1/2">TENS</div>
                        </div>

                        {/* Ones Area */}
                        <div className={`grid grid-cols-5 gap-3 p-6 rounded-xl content-end ${highContrast ? 'border border-green-400' : 'bg-green-50/50'}`}>
                            {ones.map((isActive, i) => (
                                <div 
                                    key={`one-${i}`}
                                    onClick={() => toggleOne(i)}
                                    className={`square cursor-pointer transition-all duration-200 ${isActive ? 'green shadow-md' : 'hover:bg-gray-50'}`}
                                    title="Click to toggle 1"
                                ></div>
                            ))}
                             <div className="text-sm font-bold opacity-50 absolute -bottom-6 left-1/2 transform -translate-x-1/2">ONES</div>
                        </div>
                    </div>
                    
                    <div className={`text-3xl font-bold px-8 py-4 rounded-full transition-all duration-300 transform ${
                        isCorrect 
                        ? 'bg-green-500 text-white animate-bounce shadow-lg scale-110' 
                        : highContrast ? 'bg-gray-800 border-2 border-white text-white' : 'bg-gray-100 text-gray-600'
                    }`}>
                        Total: {currentTotal} {isCorrect && "‚ú®"}
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: DAY SELECTOR
         *********************************************************/
        const DaySelector = ({ highContrast }) => {
            const [selectedDay, setSelectedDay] = React.useState(null);
            const daysToDisplay = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];

            const handleDragStart = (e, day) => {
                e.dataTransfer.setData('day', day);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                const day = e.dataTransfer.getData('day');
                if (day) setSelectedDay(day);
            };

            const allowDrop = (e) => e.preventDefault();
            const itemClass = highContrast
                ? "bg-gray-800 border-2 border-white text-white hover:bg-gray-700"
                : "bg-white border border-gray-200 text-gray-800 shadow-sm hover:shadow-md hover:translate-y-[-2px]";

            const ttsText = selectedDay 
                ? `Today is ${selectedDay}.` 
                : "What day is it? Drag the day into the box.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-8 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today is...</h2>

                    <div className="flex flex-wrap justify-center gap-4 mb-12">
                        {daysToDisplay.map(day => (
                            <div
                                key={day}
                                draggable
                                onDragStart={(e) => handleDragStart(e, day)}
                                className={`cursor-grab px-6 py-3 rounded-lg font-handwriting text-2xl transition-all ${itemClass}`}
                            >
                                {day}
                            </div>
                        ))}
                    </div>

                    <div 
                        onDrop={handleDrop}
                        onDragOver={allowDrop}
                        className={`max-w-md mx-auto h-32 rounded-xl flex items-center justify-center transition-colors ${highContrast ? 'border-4 border-dashed border-green-400 bg-gray-900' : 'border-4 border-dashed border-accentGreen/40 bg-green-50'}`}
                    >
                        {selectedDay ? (
                            <div className={`text-5xl font-handwriting animate-pop-in ${highContrast ? 'text-green-400' : 'text-accentGreen'}`}>
                                {selectedDay}
                            </div>
                        ) : (
                            <p className="opacity-50 text-xl">Drop the day here</p>
                        )}
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: WEATHER
         *********************************************************/
        const WeatherObservation = ({ highContrast }) => {
            const [observations, setObservations] = React.useState([]);
            const weatherOptions = Object.values(WeatherType);

            const handleDragStart = (e, icon) => {
                e.dataTransfer.setData('icon', icon);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                const icon = e.dataTransfer.getData('icon');
                if (icon && observations.length < 4 && !observations.includes(icon)) {
                    setObservations(prev => [...prev, icon]);
                }
            };

            // Map icons back to text for TTS
            const iconToText = (icon) => {
                const entry = Object.entries(WeatherType).find(([k,v]) => v === icon);
                return entry ? entry[0] : "something";
            };

            const weatherString = observations.length > 0 
                ? observations.map(iconToText).join(" and ")
                : "unknown";

            const ttsText = observations.length > 0
                ? `Today the weather is ${weatherString}.`
                : "Today the weather is... Drag the weather icons to the box.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-6 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today the weather is...</h2>
                    <div className="flex flex-wrap justify-center gap-4 mb-10">
                        {weatherOptions.map(icon => (
                            <div
                                key={icon}
                                draggable
                                onDragStart={(e) => handleDragStart(e, icon)}
                                className="text-5xl cursor-grab hover:scale-125 transition-transform select-none p-2"
                            >
                                {icon}
                            </div>
                        ))}
                    </div>
                    <div 
                        onDrop={handleDrop}
                        onDragOver={(e) => e.preventDefault()}
                        className={`min-h-[160px] max-w-2xl mx-auto p-4 rounded-xl flex items-center justify-center gap-6 ${highContrast ? 'border-4 border-dashed border-blue-400 bg-gray-900' : 'border-4 border-dashed border-blue-200 bg-blue-50/50'}`}
                    >
                        {observations.length === 0 && <p className="opacity-50 text-xl">Drop up to 4 icons here</p>}
                        {observations.map((icon, index) => (
                            <div 
                                key={index} 
                                onClick={() => setObservations(prev => prev.filter((_, i) => i !== index))}
                                className="text-7xl cursor-pointer hover:scale-90 transition-transform animate-pop-in"
                            >
                                {icon}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const LiveWeather = ({ highContrast }) => {
            const [loading, setLoading] = React.useState(false);
            const [data, setData] = React.useState(null);
            const [aqData, setAqData] = React.useState(null);

            const fetchWeatherAndAQ = async () => {
                setLoading(true);
                
                // 1. Simulated Weather
                const weatherPromise = new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            temp: 19,
                            desc: "Clear skies, light breeze",
                            icon: "‚òÄÔ∏è"
                        });
                    }, 1000);
                });

                // 2. Real OpenAQ Data for Seaford/Melbourne
                const aqPromise = (async () => {
                    try {
                        const res = await fetch('https://api.openaq.org/v2/latest?coordinates=-38.106,145.136&radius=25000&limit=1');
                        if (!res.ok) throw new Error('Failed to fetch');
                        const jsonData = await res.json();
                        
                        if (jsonData.results && jsonData.results.length > 0) {
                            // Look for pm25
                            const measurements = jsonData.results[0].measurements;
                            const pm25 = measurements.find(m => m.parameter === 'pm25');
                            
                            if (pm25) {
                                const val = pm25.value;
                                // Simple AQI logic (PM2.5 ug/m3)
                                if (val <= 12) return { status: 'Good', color: 'green', emoji: 'üü¢', msg: "It‚Äôs a great day for outside play!" };
                                if (val <= 35) return { status: 'Moderate', color: 'yellow', emoji: 'üü°', msg: "Air is okay, but let's take it easy." };
                                return { status: 'Unhealthy', color: 'red', emoji: 'üî¥', msg: "The air is hazy. Better to play inside today." };
                            }
                        }
                        return null; 
                    } catch (e) {
                        console.log("OpenAQ API unavailable, using local simulation.");
                        // Fallback data so the UI doesn't look broken
                         return { status: 'Good', color: 'green', emoji: 'üü¢', msg: "It‚Äôs a great day for outside play! (Simulated)" };
                    }
                })();

                const [wData, aData] = await Promise.all([weatherPromise, aqPromise]);
                setData(wData);
                setAqData(aData);
                setLoading(false);
            };

            React.useEffect(() => { fetchWeatherAndAQ(); }, []);

            const ttsText = data 
                ? `In Seaford, it is currently ${data.temp} degrees celsius with ${data.desc}. ${aqData ? `Air quality is ${aqData.status}. ${aqData.msg}` : ''}`
                : "Checking the live weather.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-8 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Live Weather (Seaford, VIC)</h2>
                    
                    <div className="flex flex-col md:flex-row gap-6 justify-center items-stretch max-w-3xl mx-auto">
                        {/* Weather Card */}
                        <div className={`flex-1 p-8 rounded-2xl transition-all flex flex-col justify-center items-center ${highContrast ? 'bg-gray-800 border-2 border-white' : 'bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-xl'}`}>
                            {loading ? (
                                <div className="flex flex-col items-center py-6">
                                    <div className="w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mb-4"></div>
                                    <p className="text-xl">Checking the sky...</p>
                                </div>
                            ) : data ? (
                                <div className="animate-fade-in">
                                    <div className="text-8xl mb-4 drop-shadow-md">{data.icon}</div>
                                    <div className="text-6xl font-bold mb-2">{data.temp}¬∞C</div>
                                    <div className="text-xl font-medium opacity-90">{data.desc}</div>
                                </div>
                            ) : (
                                <button onClick={fetchWeatherAndAQ} className="px-6 py-3 bg-white text-blue-600 rounded-full font-bold">Retry</button>
                            )}
                        </div>

                        {/* Air Quality Card */}
                        {!loading && aqData && (
                             <div className={`flex-1 p-8 rounded-2xl transition-all flex flex-col justify-center items-center animate-slide-up
                                ${highContrast 
                                    ? `bg-black border-2 border-${aqData.color}-400 text-white` 
                                    : `bg-${aqData.color}-50 border-2 border-${aqData.color}-200 text-${aqData.color}-900 shadow-lg`
                                }`}>
                                <div className="text-sm uppercase tracking-widest opacity-60 mb-4 font-bold">Air We Breathe</div>
                                <div className="text-6xl mb-4">{aqData.emoji}</div>
                                <div className="text-3xl font-bold mb-2">{aqData.status}</div>
                                <p className="text-lg opacity-80 leading-relaxed max-w-[200px]">
                                    "{aqData.msg}"
                                </p>
                            </div>
                        )}
                    </div>
                    
                    <div className="mt-6 text-xs opacity-40">
                        Weather data simulated ‚Ä¢ Air quality via OpenAQ
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: SEASONS
         *********************************************************/
        const SeasonsSelector = ({ highContrast }) => {
            const [activeSeason, setActiveSeason] = React.useState(null);
            const seasons = [
                { id: 'summer', label: 'Summer', color: 'bg-yellow-500', icon: 'üèñÔ∏è' },
                { id: 'autumn', label: 'Autumn', color: 'bg-orange-500', icon: 'üçÇ' },
                { id: 'winter', label: 'Winter', color: 'bg-blue-500', icon: '‚ùÑÔ∏è' },
                { id: 'spring', label: 'Spring', color: 'bg-green-500', icon: 'üå±' },
            ];

            const ttsText = activeSeason 
                ? `It is currently ${seasons.find(s => s.id === activeSeason).label}.` 
                : "What season is it? Tap the correct season.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-10 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>What season is it?</h2>
                    <div className="grid grid-cols-2 gap-6 max-w-2xl mx-auto">
                        {seasons.map(season => (
                            <button
                                key={season.id}
                                onClick={() => setActiveSeason(season.id)}
                                className={`p-8 rounded-xl text-2xl font-bold transition-all transform hover:scale-105 flex flex-col items-center justify-center gap-4
                                    ${activeSeason === season.id ? 'ring-4 ring-offset-4 ring-primary scale-105' : 'opacity-80 hover:opacity-100'}
                                    ${highContrast ? 'border-2 border-white bg-gray-900 text-white' : `${season.color} text-white shadow-lg`}
                                `}
                            >
                                <span className="text-5xl">{season.icon}</span>
                                {season.label}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        const WurundjeriSeasons = ({ highContrast }) => {
            const [currentSeason, setCurrentSeason] = React.useState(null);

            React.useEffect(() => {
                const month = new Date().getMonth();
                let seasonData;
                if (month === 0 || month === 1) seasonData = { name: 'Biderap', meaning: 'Dry Season', months: 'Jan - Feb' };
                else if (month === 2) seasonData = { name: 'Iuk', meaning: 'Eel Season', months: 'March' };
                else if (month >= 3 && month <= 6) seasonData = { name: 'Waring', meaning: 'Wombat Season', months: 'Apr - Jul' };
                else if (month === 7) seasonData = { name: 'Guling', meaning: 'Orchid Season', months: 'August' };
                else if (month >= 8 && month <= 9) seasonData = { name: 'Poorneet', meaning: 'Tadpole Season', months: 'Sep - Oct' };
                else seasonData = { name: 'Garrawang', meaning: 'Kangaroo Apple Season', months: 'Nov - Dec' };
                setCurrentSeason(seasonData);
            }, []);

            const cardClass = highContrast 
                ? "border-2 border-white bg-black text-white" 
                : "bg-orange-50 border-l-8 border-orange-500 text-gray-800 shadow-md";

            const ttsText = currentSeason 
                ? `The current Wurundjeri season is ${currentSeason.name}, which means ${currentSeason.meaning}. This occurs during ${currentSeason.months.replace('-', 'to')}.` 
                : "Loading Wurundjeri seasons.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-4 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>The Wurundjeri seasons</h2>
                    <p className="mb-10 opacity-70 max-w-2xl mx-auto">Connecting with Country means understanding the land's own rhythm.</p>
                    {currentSeason && (
                        <div className={`max-w-3xl mx-auto p-10 rounded-xl text-left transition-all animate-slide-up ${cardClass}`}>
                            <div className="text-sm uppercase tracking-widest opacity-60 mb-2">Current Season</div>
                            <h3 className="text-5xl font-bold mb-4 font-handwriting text-orange-600 dark:text-orange-400">{currentSeason.name}</h3>
                            <div className="text-2xl font-medium mb-2">{currentSeason.meaning}</div>
                            <div className="text-xl opacity-70">{currentSeason.months}</div>
                        </div>
                    )}
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: SPACE SLIDE (NASA APOD)
         *********************************************************/
        const SpaceSlide = ({ highContrast }) => {
            const [data, setData] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState(null);

            React.useEffect(() => {
                const fetchApod = async () => {
                    try {
                        // Using DEMO_KEY. 
                        const response = await fetch('https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY');
                        if (!response.ok) throw new Error('Failed to contact NASA');
                        const json = await response.json();
                        setData(json);
                    } catch (err) {
                        console.error(err);
                        setError('Space control is offline right now. üöÄ');
                    } finally {
                        setLoading(false);
                    }
                };
                fetchApod();
            }, []);

            const containerClass = highContrast 
                ? "border-2 border-white bg-black text-white" 
                : "bg-indigo-950 text-white shadow-2xl";

            if (loading) {
                return (
                     <div className="text-center w-full h-full flex flex-col items-center justify-center animate-fade-in relative">
                         <TTSButton text="Contacting the telescope. Please wait." highContrast={highContrast} />
                        <h2 className={`text-3xl font-medium mb-8 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today in Space</h2>
                        <div className="animate-pulse flex flex-col items-center max-w-4xl mx-auto w-full">
                            <div className={`h-96 w-full rounded-xl mb-4 ${highContrast ? 'bg-gray-800' : 'bg-gray-200'}`}></div>
                            <div className={`h-4 w-48 rounded mb-2 ${highContrast ? 'bg-gray-800' : 'bg-gray-300'}`}></div>
                            <p className="opacity-60">Contacting the telescope...</p>
                        </div>
                    </div>
                );
            }

            if (error || !data) {
                return (
                     <div className="text-center w-full h-full flex flex-col items-center justify-center animate-fade-in relative">
                         <TTSButton text="Space control is offline." highContrast={highContrast} />
                        <h2 className={`text-3xl font-medium mb-8 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today in Space</h2>
                        <div className="p-8 rounded-xl bg-gray-100 text-gray-800 inline-block">
                            <span className="text-4xl mb-2 block">üõ∞Ô∏è</span>
                            <p>{error || "No data received."}</p>
                        </div>
                    </div>
                );
            }

            // Heuristic: Take the first 2 sentences for a kid-friendly summary
            const summary = data.explanation ? (data.explanation.split('. ').slice(0, 2).join('. ') + '.') : "Check out this amazing view from space!";
            
            const ttsText = `Today in Space. ${data.title}. ${summary}. What do you notice? What do you wonder?`;

            return (
                <div className="text-center w-full h-full flex flex-col items-center justify-center animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-6 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today in Space</h2>
                    
                    <div className={`w-full max-w-6xl rounded-2xl overflow-hidden flex flex-col md:flex-row ${containerClass}`}>
                        {/* Media Section */}
                        <div className="md:w-2/3 bg-black flex items-center justify-center min-h-[400px]">
                            {data.media_type === 'video' ? (
                                <iframe 
                                    src={data.url} 
                                    title={data.title}
                                    className="w-full h-full aspect-video border-0"
                                    allowFullScreen
                                />
                            ) : (
                                <img 
                                    src={data.url} 
                                    alt={data.title} 
                                    className="w-full h-full object-contain max-h-[600px]"
                                />
                            )}
                        </div>

                        {/* Info Section */}
                        <div className="md:w-1/3 p-8 text-left flex flex-col justify-center bg-opacity-90 relative">
                            <div className="mb-auto">
                                <div className="text-xs uppercase tracking-widest text-yellow-400 mb-2">NASA Astronomy Picture of the Day</div>
                                <h3 className="text-2xl font-bold mb-4 leading-tight text-white">{data.title}</h3>
                                
                                <div className="bg-white/5 rounded-lg p-4 mb-6 backdrop-blur-sm">
                                    <p className="text-lg text-gray-100 leading-relaxed font-light">
                                        {summary}
                                    </p>
                                </div>
                            </div>
                            
                            {/* The "Window" Prompt */}
                            <div className={`p-6 rounded-xl mt-4 transform transition-transform hover:scale-[1.02] ${highContrast ? 'bg-gray-800 border-2 border-white' : 'bg-gradient-to-br from-purple-900/50 to-blue-900/50 border border-white/20 shadow-inner'}`}>
                                <h4 className="font-bold text-yellow-300 mb-2 uppercase text-xs tracking-wider">Today's Wonder Question</h4>
                                <p className="text-2xl font-handwriting text-white italic">
                                    "What do you notice? <br/>What do you wonder?"
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: ISS TRACKER (Open Notify)
         *********************************************************/
        const IssTracker = ({ highContrast }) => {
            const [position, setPosition] = React.useState({ lat: 0, long: 0 });
            const [people, setPeople] = React.useState(null);
            const [loading, setLoading] = React.useState(true);

            React.useEffect(() => {
                const fetchData = async () => {
                    try {
                        // Position: Use wheretheiss.at (HTTPS supported)
                        const posRes = await fetch('https://api.wheretheiss.at/v1/satellites/25544');
                        const posData = await posRes.json();
                        setPosition({ lat: posData.latitude, long: posData.longitude });

                        // People: Use AllOrigins Proxy to access Open Notify (HTTP only) securely
                        const pplRes = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent('http://api.open-notify.org/astros.json'));
                        const pplJson = await pplRes.json();
                        const pplData = JSON.parse(pplJson.contents);
                        setPeople(pplData);
                        
                        setLoading(false);
                    } catch (e) {
                        console.error(e);
                        setLoading(false);
                    }
                };

                fetchData();
                const interval = setInterval(fetchData, 5000); // Update position every 5s
                return () => clearInterval(interval);
            }, []);

            // Map calculation (Simple Equirectangular Projection)
            // Longitude: -180 to 180. Map width 0 to 100%.
            const x = ((position.long + 180) / 360) * 100;
            // Latitude: 90 to -90. Map height 0 to 100%.
            const y = ((90 - position.lat) / 180) * 100;

            const ttsText = people 
                ? `Where is the I S S now? Right now, there are ${people.number} humans in space. The space station is moving above the earth.`
                : "Locating the space station.";

            return (
                <div className="text-center w-full h-full flex flex-col items-center justify-center animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-4 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>
                        Where is the ISS now?
                    </h2>

                    {/* Map Container */}
                    <div className={`relative w-full max-w-4xl aspect-[2/1] bg-blue-900 rounded-xl overflow-hidden shadow-2xl border-2 ${highContrast ? 'border-white' : 'border-gray-300'}`}>
                        {/* World Map Background */}
                        <img 
                            src="https://upload.wikimedia.org/wikipedia/commons/8/83/Equirectangular_projection_SW.jpg" 
                            alt="World Map" 
                            className="absolute inset-0 w-full h-full object-cover opacity-80"
                        />
                        
                        {/* Grid Lines (Visual Flair) */}
                        <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')] opacity-30"></div>

                        {/* ISS Marker */}
                        <div 
                            className="absolute w-6 h-6 bg-red-500 border-2 border-white rounded-full transform -translate-x-1/2 -translate-y-1/2 shadow-lg z-10 transition-all duration-1000 ease-linear"
                            style={{ left: `${x}%`, top: `${y}%` }}
                        >
                            <div className="absolute inset-0 bg-red-500 rounded-full animate-ping opacity-75"></div>
                        </div>

                        {/* Satellite Icon on top of dot */}
                        <div 
                             className="absolute text-2xl transform -translate-x-1/2 -translate-y-1/2 transition-all duration-1000 ease-linear z-20"
                             style={{ left: `${x}%`, top: `${y}%`, marginTop: '-20px' }}
                        >
                            üõ∞Ô∏è
                        </div>
                    </div>

                    {/* Info Cards */}
                    <div className="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl">
                        {/* Humans In Space Count */}
                        <div className={`p-6 rounded-xl text-left ${highContrast ? 'bg-gray-800 border-2 border-white' : 'bg-white shadow-lg'}`}>
                            <div className="text-sm uppercase tracking-widest opacity-60 mb-2 font-bold">Humans in Space</div>
                            <div className="text-4xl font-bold mb-2">{people ? people.number : '-'} People</div>
                            <p className="opacity-80 text-sm">
                                Right now, {people ? people.number : 'some'} humans are living off the planet!
                            </p>
                        </div>

                        {/* Thinking Prompts */}
                        <div className={`p-6 rounded-xl text-left flex flex-col justify-center gap-2 ${highContrast ? 'bg-gray-800 border-2 border-white' : 'bg-blue-50 border border-blue-100 shadow-lg'}`}>
                            <p className="font-handwriting text-xl">"Is it daytime or nighttime down there?"</p>
                            <p className="font-handwriting text-xl text-right opacity-70">"How long to go around the Earth?"</p>
                            <p className="text-xs opacity-50 text-center mt-2">(The ISS orbits Earth every 90 minutes!)</p>
                        </div>
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: ZONES OF REGULATION (MODIFIED)
         *********************************************************/
        const ZonesOfRegulation = ({ highContrast }) => {
            // State to track which vocab modal is open ('blue', 'green', etc.)
            const [modalZoneId, setModalZoneId] = React.useState(null);
            
            // State to store the selected vocabulary words for each zone
            const [selectedVocab, setSelectedVocab] = React.useState({
                blue: [],
                green: [],
                yellow: [],
                red: [],
            });

            const zones = [
                { id: 'blue', label: 'Blue Zone', desc: 'Tired, Sad, Sick, Bored', bg: 'bg-blue-500', hcBorder: 'border-blue-400', vocab: ['sad', 'tired', 'sick', 'bored', 'hurt', 'lonely', 'down', 'moving slowly'] },
                { id: 'green', label: 'Green Zone', desc: 'Happy, Focused, Calm', bg: 'bg-green-500', hcBorder: 'border-green-400', vocab: ['calm', 'happy', 'okay', 'content', 'focused', 'ready to learn', 'relaxed', 'proud'] },
                { id: 'yellow', label: 'Yellow Zone', desc: 'Frustrated, Worried, Silly', bg: 'bg-yellow-400', hcBorder: 'border-yellow-400', vocab: ['frustrated', 'worried', 'anxious', 'nervous', 'silly', 'wiggly', 'excited', 'stressed'] },
                { id: 'red', label: 'Red Zone', desc: 'Mad, Angry, Terrified', bg: 'bg-red-500', hcBorder: 'border-red-500', vocab: ['angry', 'mad', 'furious', 'rage', 'terrified', 'panicked', 'out of control', 'yelling', 'hitting'] },
            ];

            const handleZoneClick = (zoneId) => {
                setModalZoneId(zoneId);
            };

            const handleCloseModal = () => {
                setModalZoneId(null);
            };

            const handleVocabSelect = (zoneId, word) => {
                setSelectedVocab(prev => {
                    const currentWords = prev[zoneId];
                    // If the word is already selected, remove it. Otherwise, add it.
                    const newWords = currentWords.includes(word)
                        ? currentWords.filter(w => w !== word)
                        : [...currentWords, word];
                    return { ...prev, [zoneId]: newWords };
                });
            };
            
            const activeZoneData = modalZoneId ? zones.find(z => z.id === modalZoneId) : null;
            
            // For TTS, we can create a summary of feelings.
            const feelingSummary = Object.entries(selectedVocab)
                .filter(([zoneId, words]) => words.length > 0)
                .map(([zoneId, words]) => {
                    const zoneLabel = zones.find(z => z.id === zoneId).label;
                    return `In the ${zoneLabel}, I feel ${words.join(" and ")}.`;
                })
                .join(" ");

            const ttsText = feelingSummary || "How are you feeling today? Tap a zone to choose feeling words.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-4 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>How are you feeling?</h2>
                    <p className="mb-8 text-xl opacity-80">Tap a zone to choose feeling words.</p>
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4 w-full min-h-[320px]">
                        {zones.map((zone) => {
                            const selectedWordsForZone = selectedVocab[zone.id];
                            return (
                                <button
                                    key={zone.id}
                                    onClick={() => handleZoneClick(zone.id)}
                                    className={`
                                        p-6 rounded-xl flex flex-col items-center justify-start h-full text-left transition-all duration-300
                                        hover:scale-105 hover:shadow-xl opacity-90 hover:opacity-100 focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-gray-400 z-0
                                        ${highContrast 
                                            ? `bg-black border-4 text-white ${zone.hcBorder}` 
                                            : `${zone.bg} text-white`
                                        }
                                    `}
                                >
                                    <span className="text-2xl font-bold self-center">{zone.label}</span>
                                    <div className="mt-4 text-sm font-medium opacity-90 leading-relaxed self-center mb-4">
                                        {zone.desc}
                                    </div>
                                    
                                    {/* Display selected vocab */}
                                    <div className="flex-grow w-full flex flex-wrap gap-2 justify-center items-center content-center mt-2">
                                        {selectedWordsForZone.map(word => (
                                            <span key={word} className={`px-3 py-1 text-sm font-semibold rounded-full animate-pop-in ${highContrast ? 'bg-white text-black' : 'bg-white/30'}`}>
                                                {word}
                                            </span>
                                        ))}
                                    </div>
                                </button>
                            );
                        })}
                    </div>

                    {/* Vocabulary Modal */}
                    {activeZoneData && (
                        <div 
                            className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm" 
                            onClick={handleCloseModal}
                        >
                            <div 
                                className={`relative w-full max-w-3xl p-8 rounded-2xl shadow-2xl animate-pop-in cursor-auto
                                    ${highContrast ? 'bg-black border-2 border-white' : `bg-white`}`}
                                onClick={e => e.stopPropagation()}
                            >
                                <button 
                                    onClick={handleCloseModal}
                                    className="absolute top-4 right-4 text-3xl opacity-50 hover:opacity-100"
                                    aria-label="Close"
                                >
                                    √ó
                                </button>
                                
                                <div className="text-center">
                                    <h3 className={`text-4xl font-bold mb-2 ${
                                        highContrast ? 'text-white' : 
                                        activeZoneData.id === 'blue' ? 'text-blue-600' :
                                        activeZoneData.id === 'green' ? 'text-green-600' :
                                        activeZoneData.id === 'yellow' ? 'text-yellow-500' : 'text-red-600'
                                    }`}>{activeZoneData.label}</h3>
                                    <p className={`mb-8 text-lg ${highContrast ? 'text-gray-300' : 'text-gray-600'}`}>Tap the words that match how you feel.</p>

                                    <div className="flex flex-wrap justify-center gap-3">
                                        {activeZoneData.vocab.map(word => {
                                            const isSelected = selectedVocab[activeZoneData.id].includes(word);
                                            
                                            const tileClass = isSelected 
                                                ? (highContrast 
                                                    ? `bg-white text-black ring-2 ring-white`
                                                    : `${activeZoneData.bg} text-white scale-105 shadow-lg`)
                                                : (highContrast
                                                    ? 'bg-gray-800 border-2 border-white text-white hover:bg-gray-700'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200');

                                            return (
                                                <button
                                                    key={word}
                                                    onClick={() => handleVocabSelect(activeZoneData.id, word)}
                                                    className={`px-5 py-3 rounded-lg text-xl font-medium transition-all transform active:scale-95 ${tileClass}`}
                                                >
                                                    {word}
                                                </button>
                                            );
                                        })}
                                    </div>

                                    <button
                                        onClick={handleCloseModal}
                                        className={`mt-10 px-8 py-3 rounded-full font-bold text-lg transition-transform hover:scale-105
                                            ${highContrast 
                                                ? 'bg-yellow-400 text-black border-2 border-white' 
                                                : 'bg-primary text-white shadow-md'
                                            }`}
                                    >
                                        Done
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: CLASS MANAGEMENT (Monitor & Timetable)
         *********************************************************/
        const MonitorSelector = ({ highContrast }) => {
            const [monitor, setMonitor] = React.useState('?');
            const [isChoosing, setIsChoosing] = React.useState(false);

            const chooseMonitor = () => {
                setIsChoosing(true);
                let count = 0;
                const interval = setInterval(() => {
                    setMonitor(CLASS_LIST[Math.floor(Math.random() * CLASS_LIST.length)]);
                    count++;
                    if (count > 20) {
                        clearInterval(interval);
                        setIsChoosing(false);
                    }
                }, 100);
            };

            const ttsText = monitor !== '?' 
                ? `Today's monitor is ${monitor}.` 
                : "Who is today's monitor? Press the button to choose.";

            return (
                <div className="text-center w-full animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-12 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today's Monitor is...</h2>
                    <div className={`text-6xl md:text-8xl font-handwriting mb-12 h-32 flex items-center justify-center ${isChoosing ? 'opacity-70 blur-sm' : 'animate-pop-in'}`}>
                        {monitor}
                    </div>
                    <button
                        onClick={chooseMonitor}
                        disabled={isChoosing}
                        className={`px-8 py-4 text-xl rounded-full font-bold transition-all ${highContrast 
                            ? 'bg-yellow-400 text-black border-2 border-white hover:bg-yellow-300' 
                            : 'bg-primary text-white shadow-lg hover:scale-105 active:scale-95'}`}
                    >
                        {isChoosing ? 'Choosing...' : 'Choose Monitor ‚ú®'}
                    </button>
                </div>
            );
        };

        const DailyTimetable = ({ highContrast }) => {
            const [schedule, setSchedule] = React.useState([]);

            React.useEffect(() => {
                const day = new Date().getDay();
                const todaySchedule = TIMETABLES[day] || TIMETABLES[1];
                setSchedule(todaySchedule);
            }, []);

            const itemClass = highContrast
                ? "bg-gray-900 border-b border-gray-700 text-white"
                : "bg-white border-b border-gray-100 hover:bg-gray-50 text-gray-800";

            const scheduleText = schedule.map(item => `${item.time}, ${item.activity}`).join(". ");
            const ttsText = `Today's Plan. ${scheduleText}`;

            return (
                <div className="w-full max-w-2xl mx-auto animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} className="!-left-12 !top-0" />
                    <h2 className={`text-3xl font-medium mb-8 text-center ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Today's Plan</h2>
                    <div className={`rounded-2xl overflow-hidden ${highContrast ? 'border-2 border-white' : 'shadow-xl bg-white'}`}>
                        {schedule.map((item, index) => (
                            <div 
                                key={index}
                                className={`flex items-center p-5 transition-colors ${itemClass} ${index === schedule.length - 1 ? 'border-b-0' : ''}`}
                            >
                                <div className="w-20 font-bold opacity-60 text-sm md:text-base">{item.time}</div>
                                <div className="text-3xl mr-6 select-none">{item.icon}</div>
                                <div className="text-xl font-medium flex-1">{item.activity}</div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: COUNTRY SPOTLIGHT
         *********************************************************/
        const CountrySpotlight = ({ highContrast }) => {
            const [country, setCountry] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [allCountries, setAllCountries] = React.useState([]);
            const [isSpinning, setIsSpinning] = React.useState(false);

            React.useEffect(() => {
                const fetchCountries = async () => {
                    try {
                        const res = await fetch('https://restcountries.com/v3.1/all?fields=name,capital,flags,population,area,region,latlng,continents');
                        const data = await res.json();
                        setAllCountries(data);
                        pickRandom(data);
                        setLoading(false);
                    } catch (e) {
                        console.error("Country API Error", e);
                        setLoading(false);
                    }
                };
                fetchCountries();
            }, []);

            const pickRandom = (list = allCountries) => {
                if (!list.length) return;
                setIsSpinning(true);
                
                // Visual spin effect
                let spins = 0;
                const maxSpins = 15;
                const interval = setInterval(() => {
                    const random = list[Math.floor(Math.random() * list.length)];
                    setCountry(random);
                    spins++;
                    if (spins >= maxSpins) {
                        clearInterval(interval);
                        setIsSpinning(false);
                    }
                }, 100);
            };

            const formatNumber = (num) => new Intl.NumberFormat().format(num);

            const getSeason = (lat) => {
                if (!lat && lat !== 0) return "Unknown";
                const month = new Date().getMonth(); // 0-11
                const isNorthern = lat > 0;
                
                // Simple season logic based on month
                // Dec(11), Jan(0), Feb(1)
                if (month === 11 || month <= 1) return isNorthern ? "Winter" : "Summer";
                // Mar(2), Apr(3), May(4)
                if (month >= 2 && month <= 4) return isNorthern ? "Spring" : "Autumn";
                // Jun(5), Jul(6), Aug(7)
                if (month >= 5 && month <= 7) return isNorthern ? "Summer" : "Winter";
                // Sep(8), Oct(9), Nov(10)
                return isNorthern ? "Autumn" : "Spring";
            };

            const AUS_AREA = 7692024;

            if (loading) {
                 return (
                    <div className="text-center w-full animate-fade-in relative flex flex-col items-center justify-center">
                        <TTSButton text="Loading the globe." highContrast={highContrast} />
                        <h2 className={`text-3xl font-medium mb-8 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>Country Spotlight</h2>
                        <div className="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                    </div>
                );
            }

            if (!country) return null;

            const name = country.name.common;
            const flag = country.flags.svg || country.flags.png;
            const capital = country.capital ? country.capital[0] : "No Capital";
            const population = formatNumber(country.population);
            const region = country.region;
            const lat = country.latlng ? country.latlng[0] : 0;
            const season = getSeason(lat);
            const isBiggerThanAus = country.area > AUS_AREA;
            
            // Construct map query
            const mapQuery = capital !== "No Capital" ? `${capital}, ${name}` : name;
            const mapUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(mapQuery)}`;

            const ttsText = `Country Spotlight. The country is ${name}. The capital city is ${capital}. It has a population of ${population} people. It is located in ${region}.`;

            return (
                <div className="text-center w-full h-full flex flex-col items-center justify-center animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-6 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>
                        Country Spotlight üåç
                    </h2>

                    <div className="flex flex-col md:flex-row items-center justify-center gap-8 w-full max-w-5xl">
                        
                        {/* Flag Card */}
                        <div className={`p-4 rounded-xl shadow-xl transform transition-transform duration-300 ${isSpinning ? 'scale-95 blur-sm' : 'scale-100'} ${highContrast ? 'bg-gray-800 border-2 border-white' : 'bg-white'}`}>
                            <div className="w-80 h-52 md:w-96 md:h-64 relative overflow-hidden rounded-lg border border-gray-200 shadow-inner bg-gray-100 flex items-center justify-center">
                                <img src={flag} alt={`${name} Flag`} className="w-full h-full object-cover" />
                            </div>
                        </div>

                        {/* Info Card */}
                        <div className={`flex-1 text-left p-8 rounded-2xl ${highContrast ? 'bg-black border-2 border-green-400' : 'bg-green-50 border border-green-100 shadow-lg'}`}>
                            <h3 className="text-5xl font-bold mb-2">{name}</h3>
                            <p className="text-xl opacity-60 mb-6 uppercase tracking-widest">{region}</p>

                            <div className="grid grid-cols-2 gap-y-6 gap-x-4">
                                <div>
                                    <div className="text-sm font-bold opacity-50 uppercase">Capital City</div>
                                    <div className="text-2xl font-medium">{capital}</div>
                                </div>
                                <div>
                                    <div className="text-sm font-bold opacity-50 uppercase">Population</div>
                                    <div className="text-2xl font-medium">{population}</div>
                                </div>
                                 <div>
                                    <div className="text-sm font-bold opacity-50 uppercase">Size vs Australia</div>
                                    <div className="text-2xl font-medium">
                                        {isBiggerThanAus ? "Bigger ü¶ò" : "Smaller üêú"}
                                    </div>
                                </div>
                                <div>
                                    <div className="text-sm font-bold opacity-50 uppercase">Current Season</div>
                                    <div className="text-2xl font-medium">{season}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="flex flex-wrap justify-center gap-4 mt-10">
                        <button 
                            onClick={() => pickRandom()} 
                            disabled={isSpinning}
                            className={`px-8 py-4 rounded-full font-bold text-xl transition-all transform active:scale-95 flex items-center gap-3
                                ${highContrast ? 'bg-yellow-400 text-black border-2 border-white' : 'bg-primary text-white shadow-lg hover:shadow-xl hover:-translate-y-1'}`}
                        >
                            <span>üîÑ</span> Spin the Globe
                        </button>

                        <a 
                            href={mapUrl}
                            target="_blank"
                            rel="noopener noreferrer"
                            className={`px-8 py-4 rounded-full font-bold text-xl transition-all transform active:scale-95 flex items-center gap-3 no-underline
                                ${highContrast ? 'bg-blue-600 text-white border-2 border-white' : 'bg-blue-500 text-white shadow-lg hover:shadow-xl hover:-translate-y-1'}`}
                        >
                            <span>üó∫Ô∏è</span> View on Map
                        </a>
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: DICTIONARY / WORD OF THE DAY
         *********************************************************/
        const DictionarySlide = ({ highContrast }) => {
            const [searchTerm, setSearchTerm] = React.useState('');
            const [wordData, setWordData] = React.useState(null);
            const [error, setError] = React.useState(null);

            // Fetch a word (random or search)
            const handleSearch = (e) => {
                e.preventDefault();
                setError(null);
                setWordData(null);
                
                if(!searchTerm.trim()) return;

                const found = LOCAL_DICTIONARY.find(w => w.word.toLowerCase() === searchTerm.toLowerCase());

                if (found) {
                    setWordData(found);
                } else {
                    setError("Could not find that word. Try another one!");
                }
            };

            const renderExamples = (examples) => {
                if (typeof examples === 'string') {
                    return <p className="text-xl italic opacity-70 border-l-4 border-gray-300 pl-4">"{examples}"</p>;
                }
                if (typeof examples === 'object') {
                    return (
                        <div className="border-l-4 border-gray-300 pl-4">
                             {Object.entries(examples).map(([key, val]) => (
                                <p key={key} className="text-xl italic opacity-70 mb-2">
                                    <span className="font-bold not-italic text-sm uppercase mr-2 opacity-50">{key}</span>
                                    "{val}"
                                </p>
                            ))}
                        </div>
                    )
                }
                return null;
            };

            const ttsText = wordData 
                ? `Dictionary. The word is ${wordData.word}. It means ${wordData.definition}`
                : "Dictionary. Search for a word.";

            return (
                <div className="text-center w-full animate-fade-in relative flex flex-col items-center">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-6 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>
                        Dictionary
                    </h2>

                    {/* Search Bar */}
                    <form onSubmit={handleSearch} className="w-full max-w-lg mb-8 flex gap-2">
                        <input 
                            type="text" 
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            placeholder="Type a word..."
                            className={`flex-1 px-6 py-4 rounded-full text-lg outline-none border-2 transition-all ${
                                highContrast 
                                ? 'bg-gray-900 border-white text-white focus:border-yellow-400' 
                                : 'bg-white border-gray-200 text-gray-800 shadow-sm focus:border-primary'
                            }`}
                        />
                        <button 
                            type="submit"
                            className={`px-8 py-4 rounded-full font-bold text-lg transition-transform active:scale-95 ${
                                highContrast 
                                ? 'bg-yellow-400 text-black border-2 border-white hover:bg-yellow-300' 
                                : 'bg-primary text-white shadow-lg hover:shadow-xl'
                            }`}
                        >
                            Search
                        </button>
                    </form>

                    {/* Content Area */}
                    <div className={`w-full max-w-3xl min-h-[300px] rounded-2xl p-8 transition-all ${
                        highContrast 
                        ? 'bg-gray-800 border-2 border-white' 
                        : 'bg-white shadow-xl'
                    }`}>
                        {error ? (
                             <div className="flex flex-col items-center justify-center h-full py-12">
                                <div className="text-4xl mb-4">ü§î</div>
                                <p className="text-xl opacity-80">{error}</p>
                            </div>
                        ) : wordData ? (
                             <div className="animate-pop-in">
                                <div className="flex flex-col items-center">
                                    <h3 className="text-6xl font-bold mb-4 capitalize">{wordData.word}</h3>
                                    
                                    <div className="flex items-center gap-4 mb-8">
                                        {wordData.partsOfSpeech.map((pos, idx) => (
                                            <span key={idx} className="text-lg opacity-60 italic bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full">
                                                {pos}
                                            </span>
                                        ))}
                                    </div>

                                    <div className={`w-full text-left p-6 rounded-xl ${
                                        highContrast 
                                        ? 'bg-gray-900 border border-gray-700' 
                                        : 'bg-gray-50 border border-gray-100'
                                    }`}>
                                        <p className="text-2xl font-medium leading-relaxed mb-4">
                                            {wordData.definition}
                                        </p>
                                        {renderExamples(wordData.examples)}
                                    </div>
                                </div>
                            </div>
                        ) : (
                             <div className="flex flex-col items-center justify-center h-full py-12">
                                <p className="text-xl opacity-60">Type a word to start learning!</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        /*********************************************************
         * COMPONENT: BOOK OF THE DAY
         *********************************************************/
        const BookOfTheDay = ({ highContrast }) => {
            const [book, setBook] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [searchTerm, setSearchTerm] = React.useState("");

            const classicBooks = [
                "The Very Hungry Caterpillar",
                "Where the Wild Things Are",
                "Charlotte's Web",
                "Green Eggs and Ham",
                "Harry Potter and the Sorcerer's Stone",
                "The Gruffalo",
                "Matilda",
                "The Cat in the Hat",
                "Wonder R.J. Palacio",
                "The Giving Tree"
            ];

            const fetchBook = async (query) => {
                setLoading(true);
                setBook(null);
                try {
                    const res = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(query)}&limit=1`);
                    const data = await res.json();
                    
                    if (data.docs && data.docs.length > 0) {
                        const doc = data.docs[0];
                        const coverId = doc.cover_i;
                        const coverUrl = coverId 
                            ? `https://covers.openlibrary.org/b/id/${coverId}-L.jpg` 
                            : 'https://via.placeholder.com/300x450?text=No+Cover';
                        
                        setBook({
                            title: doc.title,
                            author: doc.author_name ? doc.author_name.join(", ") : "Unknown Author",
                            year: doc.first_publish_year,
                            cover: coverUrl,
                        });
                    }
                } catch (e) {
                    console.error("Book API Error", e);
                } finally {
                    setLoading(false);
                }
            };

            React.useEffect(() => {
                const randomStart = classicBooks[Math.floor(Math.random() * classicBooks.length)];
                fetchBook(randomStart);
            }, []);

            const handleSearch = (e) => {
                e.preventDefault();
                if (searchTerm.trim()) fetchBook(searchTerm);
            };

            const ttsText = book 
                ? `Book of the Day. ${book.title}, by ${book.author}. Published in ${book.year}. Have you read this book?`
                : "Book of the Day. Loading from the library.";

            return (
                 <div className="text-center w-full h-full flex flex-col items-center justify-center animate-fade-in relative">
                    <TTSButton text={ttsText} highContrast={highContrast} />
                    <h2 className={`text-3xl font-medium mb-6 ${highContrast ? 'text-yellow-400' : 'text-primary'}`}>
                        Book of the Day üìö
                    </h2>

                    {/* Search Bar */}
                    <form onSubmit={handleSearch} className="w-full max-w-lg mb-6 flex gap-2">
                        <input 
                            type="text" 
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            placeholder="Find a book (e.g. Dinosaurs)..."
                            className={`flex-1 px-6 py-3 rounded-full text-lg outline-none border-2 transition-all ${
                                highContrast 
                                ? 'bg-gray-900 border-white text-white focus:border-yellow-400' 
                                : 'bg-white border-gray-200 text-gray-800 shadow-sm focus:border-primary'
                            }`}
                        />
                        <button 
                            type="submit"
                            className={`px-6 py-3 rounded-full font-bold transition-transform active:scale-95 ${
                                highContrast 
                                ? 'bg-yellow-400 text-black border-2 border-white' 
                                : 'bg-primary text-white shadow-md'
                            }`}
                        >
                            Find
                        </button>
                    </form>

                    {loading ? (
                         <div className="flex flex-col items-center justify-center h-96 w-full">
                            <div className="w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mb-4"></div>
                            <p className="text-xl opacity-60">Checking the library shelves...</p>
                        </div>
                    ) : book ? (
                        <div className="flex flex-col md:flex-row items-center justify-center gap-8 w-full max-w-5xl animate-pop-in">
                            {/* Book Cover */}
                            <div className={`relative w-64 md:w-80 shadow-2xl rounded-r-lg rounded-l-sm overflow-hidden transform hover:scale-105 transition-transform duration-300 ${highContrast ? 'border-2 border-white' : ''}`}>
                                <div className="absolute inset-y-0 left-0 w-2 bg-gradient-to-r from-black/20 to-transparent z-10"></div>
                                <img 
                                    src={book.cover} 
                                    alt={`Cover of ${book.title}`} 
                                    className="w-full h-auto object-cover bg-gray-200 min-h-[300px]"
                                    onError={(e) => e.target.src = 'https://via.placeholder.com/300x450?text=No+Cover'}
                                />
                            </div>

                            {/* Info Section */}
                            <div className={`flex-1 text-left p-8 rounded-2xl max-w-xl ${
                                highContrast 
                                ? 'bg-black border-2 border-orange-400 text-white' 
                                : 'bg-orange-50 border border-orange-100 shadow-lg'
                            }`}>
                                <div className="text-xs uppercase tracking-widest opacity-60 mb-2 font-bold">Open Library Feature</div>
                                <h3 className="text-4xl md:text-5xl font-bold mb-3 font-handwriting leading-tight">{book.title}</h3>
                                <p className="text-2xl opacity-80 mb-1">by {book.author}</p>
                                <p className="text-sm opacity-50 mb-8">First published: {book.year}</p>

                                {/* Questions / Hooks */}
                                <div className={`p-6 rounded-xl ${highContrast ? 'bg-gray-900 border border-white' : 'bg-white/60 border border-orange-200'}`}>
                                    <h4 className="font-bold mb-3 flex items-center gap-2">
                                        <span>üí≠</span> Class Discussion
                                    </h4>
                                    <ul className="space-y-3 text-lg">
                                        <li>‚Ä¢ Have you read this book before?</li>
                                        <li>‚Ä¢ Look at the cover. What do you think the story is about?</li>
                                        <li>‚Ä¢ Would you recommend this to a friend?</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="text-center py-12">
                             <p>Could not find that book. Try searching for something else!</p>
                        </div>
                    )}

                    <div className="mt-8">
                         <button 
                            onClick={() => {
                                const random = classicBooks[Math.floor(Math.random() * classicBooks.length)];
                                fetchBook(random);
                            }}
                            className="text-sm opacity-50 hover:opacity-100 underline"
                        >
                            Surprise me with a classic
                        </button>
                    </div>
                </div>
            );
        };

        /*********************************************************
         * MAIN APP COMPONENT
         *********************************************************/
        const App = () => {
            const [highContrast, setHighContrast] = React.useState(false);
            const [currentSlide, setCurrentSlide] = React.useState(0);

            const slides = [
                <Welcome highContrast={highContrast} />,
                <DateRepresentation highContrast={highContrast} />,
                <DaySelector highContrast={highContrast} />,
                <WeatherObservation highContrast={highContrast} />,
                <LiveWeather highContrast={highContrast} />,
                <SeasonsSelector highContrast={highContrast} />,
                <WurundjeriSeasons highContrast={highContrast} />,
                <SpaceSlide highContrast={highContrast} />,
                <IssTracker highContrast={highContrast} />,
                <CountrySpotlight highContrast={highContrast} />,
                <DictionarySlide highContrast={highContrast} />,
                <BookOfTheDay highContrast={highContrast} />,
                <ZonesOfRegulation highContrast={highContrast} />,
                <MonitorSelector highContrast={highContrast} />,
                <DailyTimetable highContrast={highContrast} />,
            ];

            const handleNext = () => {
                if (currentSlide < slides.length - 1) setCurrentSlide(prev => prev + 1);
            };

            const handlePrev = () => {
                if (currentSlide > 0) setCurrentSlide(prev => prev - 1);
            };

            return (
                <Layout
                    highContrast={highContrast}
                    toggleHighContrast={() => setHighContrast(!highContrast)}
                    currentPage={currentSlide}
                    totalPages={slides.length}
                    onNext={handleNext}
                    onPrev={handlePrev}
                >
                    <div className="w-full h-full flex items-center justify-center">
                        {slides[currentSlide]}
                    </div>
                </Layout>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
